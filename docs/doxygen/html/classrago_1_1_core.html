<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>RAGo: rago::Core Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">RAGo
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classrago_1_1_core.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classrago_1_1_core-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">rago::Core Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Class containing the core functions of the project.  
 <a href="classrago_1_1_core.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_core_8hpp_source.html">Core</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8684a5954d86eaff6098ad9930a4356b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrago_1_1_core.html#a8684a5954d86eaff6098ad9930a4356b">Core</a> (<a class="el" href="classrago_1_1_camera.html">Camera</a> *, <a class="el" href="classrago_1_1_projector.html">Projector</a> *, <a class="el" href="classrago_1_1_goban.html">Goban</a> *)</td></tr>
<tr class="memdesc:a8684a5954d86eaff6098ad9930a4356b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructors and destructors.  <a href="#a8684a5954d86eaff6098ad9930a4356b">More...</a><br/></td></tr>
<tr class="separator:a8684a5954d86eaff6098ad9930a4356b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ba873af3177d84841cd702f162767f0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrago_1_1_core.html#a4ba873af3177d84841cd702f162767f0">~Core</a> ()</td></tr>
<tr class="memdesc:a4ba873af3177d84841cd702f162767f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main void destructor Main destructor of the <a class="el" href="classrago_1_1_core.html" title="Class containing the core functions of the project.">Core</a> class.  <a href="#a4ba873af3177d84841cd702f162767f0">More...</a><br/></td></tr>
<tr class="separator:a4ba873af3177d84841cd702f162767f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1f381953349bc8b546b4fb048072cc0"><td class="memItemLeft" align="right" valign="top">Mat *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrago_1_1_core.html#aa1f381953349bc8b546b4fb048072cc0">getG2PMat</a> ()</td></tr>
<tr class="memdesc:aa1f381953349bc8b546b4fb048072cc0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Matrix for conversion between two coordinate system.  <a href="#aa1f381953349bc8b546b4fb048072cc0">More...</a><br/></td></tr>
<tr class="separator:aa1f381953349bc8b546b4fb048072cc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a115f1020e045ae46cd93d25e4eeea028"><td class="memItemLeft" align="right" valign="top">Mat *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrago_1_1_core.html#a115f1020e045ae46cd93d25e4eeea028">getVG2PMat</a> ()</td></tr>
<tr class="memdesc:a115f1020e045ae46cd93d25e4eeea028"><td class="mdescLeft">&#160;</td><td class="mdescRight">Getter for the VG2P matrix Getter for the Mat object for the transformation from the <a class="el" href="classrago_1_1_virtual_goban.html" title="Class representing the virtual goban.">VirtualGoban</a> coordinate into the <a class="el" href="classrago_1_1_projector.html" title="Class containing the drawing functions of the project.">Projector</a> coordinate.  <a href="#a115f1020e045ae46cd93d25e4eeea028">More...</a><br/></td></tr>
<tr class="separator:a115f1020e045ae46cd93d25e4eeea028"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0abe518655092c2868c6807fa95931b"><td class="memItemLeft" align="right" valign="top">Mat *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrago_1_1_core.html#ab0abe518655092c2868c6807fa95931b">getC2GMat</a> ()</td></tr>
<tr class="memdesc:ab0abe518655092c2868c6807fa95931b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Getter for the C2G matrix Getter for the Mat object for the transformation from the <a class="el" href="classrago_1_1_camera.html" title="Class fepresenting the camera and all the functions associated.">Camera</a> coordinate into the <a class="el" href="classrago_1_1_goban.html" title="Class representing the goban.">Goban</a> coordinate.  <a href="#ab0abe518655092c2868c6807fa95931b">More...</a><br/></td></tr>
<tr class="separator:ab0abe518655092c2868c6807fa95931b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7594fdf4ed564dc80c7c0b984a0f479"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrago_1_1_core.html#ae7594fdf4ed564dc80c7c0b984a0f479">genConvMat</a> ()</td></tr>
<tr class="memdesc:ae7594fdf4ed564dc80c7c0b984a0f479"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generation of the conversion matrix Generation of all the conversion matrix to change the coordinate (for example from <a class="el" href="classrago_1_1_goban.html" title="Class representing the goban.">Goban</a> to <a class="el" href="classrago_1_1_projector.html" title="Class containing the drawing functions of the project.">Projector</a>)  <a href="#ae7594fdf4ed564dc80c7c0b984a0f479">More...</a><br/></td></tr>
<tr class="separator:ae7594fdf4ed564dc80c7c0b984a0f479"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabffb8f13909465f9971eee80ab14c67"><td class="memItemLeft" align="right" valign="top">vector&lt; Point2f * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrago_1_1_core.html#aabffb8f13909465f9971eee80ab14c67">getCorners</a> ()</td></tr>
<tr class="memdesc:aabffb8f13909465f9971eee80ab14c67"><td class="mdescLeft">&#160;</td><td class="mdescRight">Getter for the point list of corners.  <a href="#aabffb8f13909465f9971eee80ab14c67">More...</a><br/></td></tr>
<tr class="separator:aabffb8f13909465f9971eee80ab14c67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74bc36a5f90d30c55be2914968795fde"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrago_1_1_core.html#a74bc36a5f90d30c55be2914968795fde">init</a> ()</td></tr>
<tr class="memdesc:a74bc36a5f90d30c55be2914968795fde"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main <a class="el" href="classrago_1_1_core.html" title="Class containing the core functions of the project.">Core</a> functions for the calibration of the camera/projector/goban.  <a href="#a74bc36a5f90d30c55be2914968795fde">More...</a><br/></td></tr>
<tr class="separator:a74bc36a5f90d30c55be2914968795fde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9035d581cc78203138c4cbcc0db1fce5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrago_1_1_core.html#a9035d581cc78203138c4cbcc0db1fce5">detection</a> ()</td></tr>
<tr class="memdesc:a9035d581cc78203138c4cbcc0db1fce5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detection by moving a point on the goban to get the projector coordinate of the corners Detection of coordinates points. To obtains the projector coordinates, the point get by the camera is displayed. If it's no over the corner, it will be moved, displayed and detected again. In the end, le points getted are saved and give the corner coordinates in the projector system.  <a href="#a9035d581cc78203138c4cbcc0db1fce5">More...</a><br/></td></tr>
<tr class="separator:a9035d581cc78203138c4cbcc0db1fce5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab724dd7b87265500da16f7b205b2c51a"><td class="memItemLeft" align="right" valign="top">int *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrago_1_1_core.html#ab724dd7b87265500da16f7b205b2c51a">imagediff</a> (int)</td></tr>
<tr class="memdesc:ab724dd7b87265500da16f7b205b2c51a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the coordinate of a played stone on the goban First the difference between to images is done (one just taken from the camera ans the other is the reference frame). Then a mask is applyed focus the detection on the goban Then a circle detection function is apply to get the played stone.  <a href="#ab724dd7b87265500da16f7b205b2c51a">More...</a><br/></td></tr>
<tr class="separator:ab724dd7b87265500da16f7b205b2c51a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a782829ed7ce49bc437c1ebab35b54b8a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrago_1_1_core.html#a782829ed7ce49bc437c1ebab35b54b8a">detectHand</a> ()</td></tr>
<tr class="memdesc:a782829ed7ce49bc437c1ebab35b54b8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detect if an hand is inside the circle of validation First a just taken image is compare to the reference frame. Then a binary mask is applyed to detect only on the circle. Then an other function is called to detect id an object is present.  <a href="#a782829ed7ce49bc437c1ebab35b54b8a">More...</a><br/></td></tr>
<tr class="separator:a782829ed7ce49bc437c1ebab35b54b8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03f1bb5f0502c58126fe984384c10b32"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrago_1_1_core.html#a03f1bb5f0502c58126fe984384c10b32">detectHandParam</a> ()</td></tr>
<tr class="memdesc:a03f1bb5f0502c58126fe984384c10b32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detect the parameters for the hand detection Try to determine the gray level and number of pixel to detect to get the better hand detection possible.  <a href="#a03f1bb5f0502c58126fe984384c10b32">More...</a><br/></td></tr>
<tr class="separator:a03f1bb5f0502c58126fe984384c10b32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b8b4140061073a3f9e7893da7877147"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4b8b4140061073a3f9e7893da7877147"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrago_1_1_core.html#a4b8b4140061073a3f9e7893da7877147">countNotBlack</a> (Mat img, int lim)</td></tr>
<tr class="memdesc:a4b8b4140061073a3f9e7893da7877147"><td class="mdescLeft">&#160;</td><td class="mdescRight">TODO. <br/></td></tr>
<tr class="separator:a4b8b4140061073a3f9e7893da7877147"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a420895ce3afeebf36ba0a62998224727"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a420895ce3afeebf36ba0a62998224727"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrago_1_1_core.html#a420895ce3afeebf36ba0a62998224727">generateBeginningTurnMat</a> ()</td></tr>
<tr class="memdesc:a420895ce3afeebf36ba0a62998224727"><td class="mdescLeft">&#160;</td><td class="mdescRight">Take the reference image to use for comparing in detectHand and ImageDiff Generation of the image that will be used to get where a stone is played and if an hand is in the circle of detection. <br/></td></tr>
<tr class="separator:a420895ce3afeebf36ba0a62998224727"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a832fe64c539d907da77bb8dc5571f8ad"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a832fe64c539d907da77bb8dc5571f8ad"></a>
Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrago_1_1_core.html#a832fe64c539d907da77bb8dc5571f8ad">beginningTurn</a></td></tr>
<tr class="memdesc:a832fe64c539d907da77bb8dc5571f8ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reference image This Mat represent the picture take before human player move for comparaison. Should be private. <br/></td></tr>
<tr class="separator:a832fe64c539d907da77bb8dc5571f8ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class containing the core functions of the project. </p>
<p>This class give all the functions that give back the coordinates of the goban (camera, projector, <a class="el" href="classrago_1_1_virtual_goban.html" title="Class representing the virtual goban.">VirtualGoban</a>, goban coordinates). It also give the matrix permitting the convertion between two system of coordintes.</p>
<p>Other functions are use to detect stones and hands on the goban. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a8684a5954d86eaff6098ad9930a4356b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">rago::Core::Core </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classrago_1_1_camera.html">Camera</a> *&#160;</td>
          <td class="paramname"><em>camera</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrago_1_1_projector.html">Projector</a> *&#160;</td>
          <td class="paramname"><em>proj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrago_1_1_goban.html">Goban</a> *&#160;</td>
          <td class="paramname"><em>goban</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructors and destructors. </p>
<p>Main void constructor Main constructor of the <a class="el" href="classrago_1_1_core.html" title="Class containing the core functions of the project.">Core</a> class. It initialize all the field for initialization and detection.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">camera</td><td>Pointer to the <a class="el" href="classrago_1_1_camera.html" title="Class fepresenting the camera and all the functions associated.">Camera</a> object used to get image from the device. </td></tr>
    <tr><td class="paramname">proj</td><td>Pointer to the <a class="el" href="classrago_1_1_projector.html" title="Class containing the drawing functions of the project.">Projector</a> object used to display images. </td></tr>
    <tr><td class="paramname">goban</td><td>Pointer to the <a class="el" href="classrago_1_1_goban.html" title="Class representing the goban.">Goban</a> object containing the stones played. </td></tr>
  </table>
  </dd>
</dl>
<p>Setting the RAGo objects</p>
<p>Initialize of the number of points detected to 0</p>
<p>Initialize the temporary points</p>
<p>Initialize the detection values</p>
<p>Initialization of the values for the hand detection </p>

</div>
</div>
<a class="anchor" id="a4ba873af3177d84841cd702f162767f0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">rago::Core::~Core </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main void destructor Main destructor of the <a class="el" href="classrago_1_1_core.html" title="Class containing the core functions of the project.">Core</a> class. </p>
<p>Deletion of the point object </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a782829ed7ce49bc437c1ebab35b54b8a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rago::Core::detectHand </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Detect if an hand is inside the circle of validation First a just taken image is compare to the reference frame. Then a binary mask is applyed to detect only on the circle. Then an other function is called to detect id an object is present. </p>
<p>Zone in the projector area</p>
<p>Creation of the mask in the Virtual <a class="el" href="classrago_1_1_goban.html" title="Class representing the goban.">Goban</a> system</p>
<p>Creation of the mask with the camera size</p>
<p>Get the horloge size &amp; draw it in white</p>
<p>Get a new frame</p>
<p>Do the difference between the just getted frame and the reference one</p>
<p>Apply the mask</p>
<p>Convert it to gray</p>
<p>Do a gaussian blur to improve the results</p>
<p>Get the number of pixel </p>

</div>
</div>
<a class="anchor" id="a03f1bb5f0502c58126fe984384c10b32"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rago::Core::detectHandParam </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Detect the parameters for the hand detection Try to determine the gray level and number of pixel to detect to get the better hand detection possible. </p>
<p>Zone in the projector area</p>
<p>Creation of the mask in the Virtual <a class="el" href="classrago_1_1_goban.html" title="Class representing the goban.">Goban</a> system</p>
<p>Creation of the mask with the camera size</p>
<p>Get the horloge size &amp; draw it in white</p>
<p>Get a new frame</p>
<p>Do the difference between the just getted frame and the reference one</p>
<p>Apply the mask</p>
<p>Convert it to gray</p>
<p>Do a gaussian blur to improve the results</p>
<p>Get the parameters for the hand detection by finding the hightest gray level that allow to detect something. </p>

</div>
</div>
<a class="anchor" id="a9035d581cc78203138c4cbcc0db1fce5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rago::Core::detection </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Detection by moving a point on the goban to get the projector coordinate of the corners Detection of coordinates points. To obtains the projector coordinates, the point get by the camera is displayed. If it's no over the corner, it will be moved, displayed and detected again. In the end, le points getted are saved and give the corner coordinates in the projector system. </p>
<p>Setting the number of points already detected</p>
<p>Getting the point to display and move on the goban</p>
<p>Projection of the point</p>
<p>Do the detection while there still corner not detected</p>
<p>Reloading a picture to detect points displayed</p>
<p>Detection of th calibration point displayed on the goban.</p>
<p>Changing the coordinate of the display point to move it to the corner if it need</p>
<p>If the point isn't over the corner withe a margin, it's moved. </p>

</div>
</div>
<a class="anchor" id="ae7594fdf4ed564dc80c7c0b984a0f479"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rago::Core::genConvMat </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generation of the conversion matrix Generation of all the conversion matrix to change the coordinate (for example from <a class="el" href="classrago_1_1_goban.html" title="Class representing the goban.">Goban</a> to <a class="el" href="classrago_1_1_projector.html" title="Class containing the drawing functions of the project.">Projector</a>) </p>
<p>Setting <a class="el" href="classrago_1_1_projector.html" title="Class containing the drawing functions of the project.">Projector</a> coordinate of corners</p>
<p>Setting <a class="el" href="classrago_1_1_goban.html" title="Class representing the goban.">Goban</a> coordinate of corners</p>
<p>Setting <a class="el" href="classrago_1_1_camera.html" title="Class fepresenting the camera and all the functions associated.">Camera</a> coordinate of corners</p>
<p>Setting <a class="el" href="classrago_1_1_virtual_goban.html" title="Class representing the virtual goban.">VirtualGoban</a> coordinate of corners</p>
<p>Generation of the conversion matrix </p>

</div>
</div>
<a class="anchor" id="ab0abe518655092c2868c6807fa95931b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mat * rago::Core::getC2GMat </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Getter for the C2G matrix Getter for the Mat object for the transformation from the <a class="el" href="classrago_1_1_camera.html" title="Class fepresenting the camera and all the functions associated.">Camera</a> coordinate into the <a class="el" href="classrago_1_1_goban.html" title="Class representing the goban.">Goban</a> coordinate. </p>
<dl class="section return"><dt>Returns</dt><dd>Mat object for the conversion from <a class="el" href="classrago_1_1_camera.html" title="Class fepresenting the camera and all the functions associated.">Camera</a> to <a class="el" href="classrago_1_1_goban.html" title="Class representing the goban.">Goban</a> </dd></dl>

</div>
</div>
<a class="anchor" id="aabffb8f13909465f9971eee80ab14c67"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vector&lt; Point2f * &gt; rago::Core::getCorners </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Getter for the point list of corners. </p>
<dl class="section return"><dt>Returns</dt><dd>vector of the detected corners (<a class="el" href="classrago_1_1_projector.html" title="Class containing the drawing functions of the project.">Projector</a> coordinates) </dd></dl>

</div>
</div>
<a class="anchor" id="aa1f381953349bc8b546b4fb048072cc0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mat * rago::Core::getG2PMat </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Matrix for conversion between two coordinate system. </p>
<p>Getter for the G2P matrix Getter for the Mat object for the transformation from the <a class="el" href="classrago_1_1_goban.html" title="Class representing the goban.">Goban</a> coordinate into the <a class="el" href="classrago_1_1_projector.html" title="Class containing the drawing functions of the project.">Projector</a> coordinate</p>
<dl class="section return"><dt>Returns</dt><dd>Mat object for the conversion from <a class="el" href="classrago_1_1_goban.html" title="Class representing the goban.">Goban</a> to <a class="el" href="classrago_1_1_projector.html" title="Class containing the drawing functions of the project.">Projector</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a115f1020e045ae46cd93d25e4eeea028"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mat * rago::Core::getVG2PMat </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Getter for the VG2P matrix Getter for the Mat object for the transformation from the <a class="el" href="classrago_1_1_virtual_goban.html" title="Class representing the virtual goban.">VirtualGoban</a> coordinate into the <a class="el" href="classrago_1_1_projector.html" title="Class containing the drawing functions of the project.">Projector</a> coordinate. </p>
<dl class="section return"><dt>Returns</dt><dd>Mat object for the conversion from <a class="el" href="classrago_1_1_virtual_goban.html" title="Class representing the virtual goban.">VirtualGoban</a> to <a class="el" href="classrago_1_1_projector.html" title="Class containing the drawing functions of the project.">Projector</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ab724dd7b87265500da16f7b205b2c51a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int * rago::Core::imagediff </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>player</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the coordinate of a played stone on the goban First the difference between to images is done (one just taken from the camera ans the other is the reference frame). Then a mask is applyed focus the detection on the goban Then a circle detection function is apply to get the played stone. </p>
<ul>
<li>number of the player (0 for white, 1 for black) </li>
</ul>
<p>Creation of the mask in the Virtual <a class="el" href="classrago_1_1_goban.html" title="Class representing the goban.">Goban</a> system</p>
<p>Creation of the mask with the camera size</p>
<p>Drawing a rectangle on the maskDraw to get just the goban</p>
<p>Transformation of the first mask, into the second which can be applyed to the camera frame</p>
<p>Getting a frame to do the difference</p>
<p>Do the difference between the just taken frame and the reference frame</p>
<p>Application of the mask</p>
<p>Convert it to gray</p>
<p>Reduce the noise so we avoid false circle detection First an erosion</p>
<p>Then increase the contrast</p>
<p>Get all the circles on the image</p>
<p>Draw the circles detected</p>
<p>Getting the center of the first circle detected</p>
<p>Saving the coordinate of the center</p>
<p>Get its coordinates in the <a class="el" href="classrago_1_1_goban.html" title="Class representing the goban.">Goban</a></p>
<p>Play the stone in the <a class="el" href="classrago_1_1_goban.html" title="Class representing the goban.">Goban</a> object</p>
<p>Return the center point </p>

</div>
</div>
<a class="anchor" id="a74bc36a5f90d30c55be2914968795fde"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rago::Core::init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main <a class="el" href="classrago_1_1_core.html" title="Class containing the core functions of the project.">Core</a> functions for the calibration of the camera/projector/goban. </p>
<p>Initialization Initialization before the detection. First the stone putted on the corners are read to get there coordinates in the camera system. </p>
<p>Waiting the conformation of the user to let time to place the window in case of only corner detection</p>
<p>Drawing a white image on the goban to improve the detection od the corners</p>
<p>While the isn't enought corners detected</p>
<p>Load source image and convert it to gray</p>
<p>Minimum width of circles that detected</p>
<p>Maximum number of points detected</p>
<p>While there isn't enought corner detected saved in list_temp or the size of the circes detected is more than the maximum size of the goban/15</p>
<p>Getting in list_temp the center of circles detectes by giving the image to analise and the minimum width of the circles</p>
<p>If there is too many or too few points detected,</p>
<p>Ask for the confirmation from the user</p>
<p>If there the right number of points</p>
<p>Ask for the confirmation from the user</p>
<p>Save the corners</p>
<p>Ordering the points to have the top left corner in 0, the top right corner in 1 ... </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_core_8hpp_source.html">Core.hpp</a></li>
<li><a class="el" href="_core_8cpp.html">Core.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacerago.html">rago</a></li><li class="navelem"><a class="el" href="classrago_1_1_core.html">Core</a></li>
    <li class="footer">Generated on Thu Mar 27 2014 20:35:32 for RAGo by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
